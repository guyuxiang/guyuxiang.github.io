"function"==typeof jQuery&&jQuery(document).ready(function(a){a("body").on("post-load",function(){window.a2a&&a2a.init_all()})});
a2a_config.callbacks = a2a_config.callbacks || [];

function a2aReady(){
    // if (!document.querySelector('.a2a_s_wechat')){
    //     setTimeout(() => {
    //         a2aReady();
    //     },100);
    //     return;
    // }
    jQuery('.a2a_button_wechat').click(function (){
        //jQuery('#a2a_overlay').click();
        Swal.fire({
            width: 370,
            html: `
            <div class="" style="padding-bottom: 1em;">
                <h3 style="font-size: 16px;font-width: 500;margin-bottom: 5px;color:000;">微信扫一扫后点击右上角按钮</h3>
                <div style="font-size: 14px;margin-bottom: 10px">进行分享</div>
                <div id="wx-share-qrcode" style="display: flex;text-align: center;align-items: center;justify-content: center;"></div>
            </div>
            `,
            showCloseButton: true,
            showCancelButton: false,
            showConfirmButton: false,
            focusCancel: true,
            focusDeny: true,
        });
        var qrcode = new QRCode(document.getElementById("wx-share-qrcode"), {
            text: window.location.href,
            width: 200,
            height: 200
        });
        return false;
    });
}
a2a_config.callbacks.push({
    ready: function (){

        function isMobileDevice() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }
        if (isMobileDevice()) {
            jQuery('.a2a_button_wechat').hide();
        } else {
            a2aReady();
        }


    },
    share: function (data) {
        return {
            url: window.location.href,
        };
    }
});